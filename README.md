# Tech Challenge - find-my-best-route

## Solution overview

![overview](Resources/overview.png)
![folders](Resources/folders_struct.png)

## Running the Console application
#### * ensure that the file path is correct

```
dotnet run --project ConsoleApplication "C:\Resources\input-file.txt"
```
![console application](Resources/console_demo1.gif)

## Running the Web API
#### * ensure that the file path is correct

```
dotnet run --project Api/Api.csproj
```

#### Web API urls
```
http://localhost:5000
https://localhost:5001
```

#### API Documentation (generated by swagger)
![api-docs](Resources/api_doc.png)
```
https://localhost:5001/index.html
http://localhost:5000/index.html
```

## Request examples
#### Add new routes (POST)
##### expect a list with one or more routes to be added
```
curl -X POST "https://localhost:5001/Route?filePath=Resources/input-file.txt" -H "accept: */*" -H "Content-Type: application/json" -d "[{\"from\":\"bhz\",\"to\":\"bru\",\"price\":10}]"
```

#### Get the Best Route between two points (GET)
```
curl -X GET "https://localhost:5001/Route/bhz/bru?filePath=Resources/input-file.txt" -H "accept: text/plain"
```
##### response example
```
Best route: BHZ - BRU > $10
```
## Quality assurance

### Unit tests 
#### testing Services and Infrastructure layers

```
dotnet test
```
![testing](Resources/tests_demo1.gif)

### Code coverage
#### collect code coverage
```
MSYS2_ARG_CONV_EXCL="*" dotnet test --no-build \     
  --configuration Release \
  /p:CollectCoverage=true \
  /p:CoverletOutputFormat=cobertura \
  /p:CoverletOutput=./TestResults/Coverage/
```

```
dotnet tool run reportgenerator \
  -reports:Services.Tests/TestResults/Coverage/coverage.cobertura.xml \
  -targetdir:./CodeCoverage \
  -reporttypes:HtmlInline_AzurePipelines
```

```
dotnet tool run reportgenerator \
  -reports:Infrastructure.Tests/TestResults/Coverage/coverage.cobertura.xml \
  -targetdir:./CodeCoverage \
  -reporttypes:HtmlInline_AzurePipelines
```

![coverage](Resources/coverage-demo1.png)

## Continuous integration 
### GitHub Actions
```
.github/workflows/dotnet-core.yml
```
![ci](Resources/ci-demo01.png)

## Built With
* .NET Core 3.1
* C#
* GitHub
* Swagger
* Ubuntu 18.3
* Visual Studio Code



